# 実装計画書

## 概要
このディレクトリには、World News Readerプロジェクトのバックエンド実装計画を段階的に記載しています。
各フェーズは依存関係を考慮した順序で構成され、プロジェクトの方針（[CLAUDE.md](../../CLAUDE.md)）に準拠しています。

## ブランドコンセプト
**「世界の話題をゆっくり知ろう☕️」**
- コーヒーブレイクのようなゆったりとした時間に楽しめる記事提供
- 急がず、じっくりと読める記事構成
- 5-10分で読める適切なボリューム

## 実装フェーズ

### [Phase 1: 基盤構築](./phase-1-foundation.md)
**目的**: プロジェクトの土台となるデータモデルとインフラの整備
- Supabaseのセットアップとテーブル設計
- ドメイン層の実装（型定義、APIアダプタ）
- 環境変数の設定
- **依存**: なし
- **所要時間**: 2-3日

### [Phase 2: データ収集パイプライン](./phase-2-data-collection.md)
**目的**: 外部APIからのデータ取得と正規化
- NewsAPI の連携実装
- データの正規化と保存
- レート制限とエラーハンドリング
- **依存**: Phase 1完了
- **所要時間**: 3-4日

### [Phase 3: AI処理パイプライン](./phase-3-ai-processing.md)
**目的**: 記事の自動生成と品質管理
- AIエージェントの実装（選定、構成、執筆、校正、検証）
- プロンプトテンプレートの作成
- 品質チェックシステム
- **依存**: Phase 2完了
- **所要時間**: 4-5日

### [Phase 4: 公開システム](./phase-4-publishing.md)
**目的**: 生成された記事の公開とフロントエンド連携
- 記事公開フローの実装
- フロントエンドとSupabaseの連携
- ISRとキャッシュ戦略
- **依存**: Phase 3完了
- **所要時間**: 2-3日

### [Phase 5: 自動化と運用](./phase-5-automation.md)
**目的**: システムの自動実行と監視体制の構築
- GitHub Actionsの設定
- 定期実行スケジュール（日本時間 6:00/12:00）
- エラー通知と監視
- **依存**: Phase 4完了
- **所要時間**: 1-2日

### [Phase 6: ポストローンチ整備](./phase-6-post-launch.md)
**目的**: フロントエンドの実データ対応と Gemini ベースのパイプライン実装
- モックデータ依存を排除し、Supabase から動的に記事を取得
- Gemini API を用いたアウトライン生成〜検証フローを実装
- Slack 通知・Runbook整備・本番運用準備
- **依存**: Phase 5完了
- **所要時間**: 2-3日

### [Phase NewsAPI Migration](./phase-newsapi-migration.md)
**目的**: NewsAPI 単独構成への移行と旧プロバイダ資産の撤廃
- Guardian/NYT 関連コード・ドキュメントの削除
- NewsAPI アダプタ／クライアント／スクリプトの導入
- Supabase スキーマ・テスト・CI の整合性確認
- **依存**: Phase 5 までの現行構成を把握していること
- **所要時間**: 2-3日

## 開発方針（CLAUDE.md準拠）

### コーディング規約
- **型安全性**: `any`/`unknown`の使用を避け、具体的な型定義を優先
- **イミュータビリティ**: ドメインモデルで`readonly`を使用
- **関数**: アロー関数のみ使用
- **配列操作**: `map`/`filter`/`reduce`を優先
- **早期リターン**: 制御フローの可読性向上

### 開発アプローチ
- **小さなステップ**: 1タスク → 実装 → テスト → コミット
- **必要最小限**: 既存ファイルの編集を優先、新規作成は最小限
- **可読性優先**: コードの明確性と一貫性を重視

## 技術スタック
- **フロントエンド**: Next.js 15 (App Router)
- **バックエンド**: Supabase
- **AI/LLM**: OpenAI API / Anthropic Claude API
- **外部API**: NewsAPI.org
- **自動化**: GitHub Actions
- **言語**: TypeScript（厳格な型安全性）

## 実装チェックリスト
詳細なチェック項目は[checklist.md](./checklist.md)を参照してください。

## 注意事項
- APIの利用規約を遵守（本文の保存・再配布は行わない）
- 出典を明確に表示（媒体名・記事タイトル・URL・日付）
- レート制限に配慮した実装
- エラーハンドリングの徹底

## 関連ドキュメント
- [要件定義書](../requirement-spec.md)
- [技術仕様書](../tech-spec.md)
- [UI/UX仕様書](../ui-spec.md)
- [開発ガイドライン](../../CLAUDE.md)
