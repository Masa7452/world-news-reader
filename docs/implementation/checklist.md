# 実装チェックリスト

## 全体進捗
- [ ] Phase 1: 基盤構築
- [ ] Phase 2: データ収集パイプライン
- [ ] Phase 3: AI処理パイプライン
- [ ] Phase 4: 公開システム
- [ ] Phase 5: 自動化と運用

## Phase 1: 基盤構築 ✅

### 環境セットアップ
- [ ] Supabaseプロジェクト作成
- [ ] 環境変数設定（.env.local）
- [ ] TypeScript設定確認

### データベース
- [ ] sourcesテーブル作成
- [ ] topicsテーブル作成
- [ ] articlesテーブル作成
- [ ] インデックス設定
- [ ] RLSポリシー設定

### ドメイン層
- [ ] src/domain/types.ts作成
- [ ] src/domain/guardian.ts作成
- [ ] src/domain/nyt.ts作成
- [ ] 型の正規化関数実装
- [ ] テスト作成

### Supabaseクライアント
- [ ] src/lib/supabase.ts作成
- [ ] 接続テスト実行
- [ ] Admin権限の設定

## Phase 2: データ収集パイプライン ✅

### 共通ユーティリティ
- [ ] HTTPクライアント実装（指数バックオフ）
- [ ] 日付ユーティリティ実装
- [ ] エラーハンドリング実装

### Guardian API連携
- [ ] APIキー取得
- [ ] クライアント実装
- [ ] fetch_guardian.tsスクリプト作成
- [ ] レート制限対策実装
- [ ] データ保存確認

### NYT API連携
- [ ] APIキー取得
- [ ] クライアント実装
- [ ] fetch_nyt.tsスクリプト作成
- [ ] Article Search API連携
- [ ] Top Stories API連携
- [ ] データ保存確認

### トピック処理
- [ ] rank_topics.tsスクリプト作成
- [ ] 重複排除ロジック実装
- [ ] スコアリングアルゴリズム実装
- [ ] ジャンル分類実装

## Phase 3: AI処理パイプライン ✅

### AI基盤
- [ ] AIクライアント抽象化
- [ ] OpenAI実装
- [ ] Anthropic実装（オプション）
- [ ] エラーハンドリング

### プロンプトテンプレート
- [ ] 基本テンプレート作成
- [ ] ジャンル別テンプレート作成
  - [ ] news.md
  - [ ] technology.md
  - [ ] health.md
  - [ ] lifestyle.md
  - [ ] culture.md
  - [ ] business.md
  - [ ] science.md

### AIエージェント
- [ ] build_outline.ts（構成生成）
- [ ] write_post.ts（記事執筆）
- [ ] polish_post.ts（校正）
- [ ] verify_post.ts（検証）

### 品質管理
- [ ] 検証基準の定義
- [ ] エラーログ記録
- [ ] 品質メトリクス測定

## Phase 4: 公開システム ✅

### 公開処理
- [ ] publish_local.tsスクリプト作成
- [ ] ステータス管理実装
- [ ] ISR再検証トリガー

### APIルート
- [ ] /api/articles（一覧取得）
- [ ] /api/articles/[slug]（詳細取得）
- [ ] /api/revalidate（キャッシュ再検証）
- [ ] /api/health（ヘルスチェック）

### フロントエンド統合
- [ ] Supabase連携への切り替え
- [ ] 記事一覧ページ更新
- [ ] 記事詳細ページ更新
- [ ] カテゴリーフィルター実装
- [ ] 関連記事表示

### パフォーマンス最適化
- [ ] ISR設定
- [ ] キャッシュ戦略実装
- [ ] 画像最適化設定
- [ ] CDN設定

### SEO/OGP
- [ ] メタデータ生成
- [ ] OGP画像設定
- [ ] サイトマップ生成
- [ ] 構造化データ実装

## Phase 5: 自動化と運用 ✅

### パイプライン統合
- [ ] pipeline.tsメインスクリプト作成
- [ ] エラーハンドリング実装
- [ ] ログシステム実装
- [ ] 通知システム実装

### GitHub Actions
- [ ] scheduled-intake.yml（定期実行）
- [ ] manual-pipeline.yml（手動実行）
- [ ] deploy.yml（デプロイ）
- [ ] シークレット設定

### 監視・ログ
- [ ] ログ管理システム
- [ ] ヘルスチェック実装
- [ ] エラー通知設定
- [ ] パフォーマンス監視

### 復旧・メンテナンス
- [ ] リトライメカニズム
- [ ] 復旧スクリプト
- [ ] データクリーンアップ
- [ ] バックアップ設定

## リリース前チェック ✅

### セキュリティ
- [ ] APIキーの環境変数化
- [ ] RLS設定確認
- [ ] CORS設定
- [ ] レート制限実装

### パフォーマンス
- [ ] Lighthouse スコア（90以上）
- [ ] Core Web Vitals達成
- [ ] ビルドサイズ最適化
- [ ] 画像最適化確認

### 品質保証
- [ ] E2Eテスト実行
- [ ] 負荷テスト実行
- [ ] クロスブラウザテスト
- [ ] モバイル表示確認

### ドキュメント
- [ ] README.md更新
- [ ] API仕様書完成
- [ ] 運用マニュアル作成
- [ ] トラブルシューティングガイド

### 法的確認
- [ ] API利用規約遵守
- [ ] プライバシーポリシー
- [ ] 利用規約
- [ ] 出典表記確認

## 運用開始後の確認 ✅

### 初週
- [ ] 日次パイプライン実行確認
- [ ] エラー率監視
- [ ] API利用量確認
- [ ] ユーザーフィードバック収集

### 初月
- [ ] コスト分析
- [ ] パフォーマンス分析
- [ ] コンテンツ品質評価
- [ ] 改善点の洗い出し

## 備考

### 優先度
1. **必須**: Phase 1-2の基盤部分
2. **重要**: Phase 3-4の中核機能
3. **推奨**: Phase 5の自動化・監視

### リスク管理
- API制限への対処法を準備
- AIコストの監視体制構築
- バックアップとリカバリ手順の文書化

### 継続的改善
- 週次でメトリクスレビュー
- 月次で品質評価
- 四半期でアーキテクチャレビュー